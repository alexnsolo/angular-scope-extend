<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Angular scopeExtend by civilframe</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>Angular scopeExtend</h1>
        <p>Organize controller code using object notation.</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/civilframe/angular-scope-extend" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/civilframe/angular-scope-extend/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/civilframe/angular-scope-extend/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p><code>bower install angular-scope-extend --save</code></p>

<p>2 KB minified</p>

<h2>
<a id="benefits" class="anchor" href="#benefits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Benefits</h2>

<p>Organize your angular controller code in object notation, using 'this' to refer to $scope. Works best with CoffeeScript.</p>

<h3>
<a id="before" class="anchor" href="#before" aria-hidden="true"><span class="octicon octicon-link"></span></a>Before</h3>

<p>CoffeeScript:</p>

<div class="highlight highlight-coffeescript"><pre>angular.module(<span class="pl-s1"><span class="pl-pds">'</span>my-module<span class="pl-pds">'</span></span>).controller <span class="pl-s1"><span class="pl-pds">'</span>MyCtrl<span class="pl-pds">'</span></span>, <span class="pl-vpf">($scope, myService)</span> <span class="pl-st">-&gt;</span>

    <span class="pl-v"><span class="pl-v">$scope.myVariable <span class="pl-k">=</span></span></span> <span class="pl-c1">5</span>

    <span class="pl-en">$scope.myFunction </span><span class="pl-k">=</span> <span class="pl-st"><span class="pl-st">-&gt;</span></span>
        myService.doStuff($scope.myVariable)

    <span class="pl-en">$scope.myOtherFunction </span><span class="pl-k">=</span> <span class="pl-st"><span class="pl-st">-&gt;</span></span>
        <span class="pl-en">console</span>.<span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>reticulating spleens<span class="pl-pds">'</span></span>)

    $scope.$watch <span class="pl-s1"><span class="pl-pds">'</span>myVariable<span class="pl-pds">'</span></span>, <span class="pl-vpf">(newValue, oldValue)</span> <span class="pl-st">-&gt;</span>
        $scope.myFunction()

    $scope.$<span class="pl-c1">on</span> <span class="pl-s1"><span class="pl-pds">'</span>SOME_EVENT<span class="pl-pds">'</span></span>, <span class="pl-vpf">(event)</span> <span class="pl-st">-&gt;</span>
        $scope.myOtherFunction()
        $scope.myVariable<span class="pl-k">++</span>

    <span class="pl-c"># Initialization</span>
    $scope.myFunction()
    <span class="pl-en">console</span>.<span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>Phew. Much $scope everywhere.<span class="pl-pds">'</span></span>)</pre></div>

<p>JavaScript:</p>

<div class="highlight highlight-javascript"><pre>angular.module(<span class="pl-s1"><span class="pl-pds">'</span>my-module<span class="pl-pds">'</span></span>).controller(<span class="pl-s1"><span class="pl-pds">'</span>MyCtrl<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">$scope</span>, <span class="pl-vpf">myService</span>) {

    $scope.myVariable <span class="pl-k">=</span> <span class="pl-c1">5</span>;

    <span class="pl-s3">$scope</span>.<span class="pl-en">myFunction</span> <span class="pl-k">=</span> <span class="pl-st">function</span>() {
        <span class="pl-k">return</span> myService.doStuff($scope.myVariable);
    };

    <span class="pl-s3">$scope</span>.<span class="pl-en">myOtherFunction</span> <span class="pl-k">=</span> <span class="pl-st">function</span>() {
        <span class="pl-k">return</span> <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">'</span>reticulating spleens<span class="pl-pds">'</span></span>);
    };

    $scope.$<span class="pl-s3">watch</span>(<span class="pl-s1"><span class="pl-pds">'</span>myVariable<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">newValue</span>, <span class="pl-vpf">oldValue</span>) {
        <span class="pl-k">return</span> $scope.myFunction();
    });

    $scope.$on(<span class="pl-s1"><span class="pl-pds">'</span>SOME_EVENT<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">event</span>) {
        $scope.myOtherFunction();
        <span class="pl-k">return</span> $scope.myVariable<span class="pl-k">++</span>;
    });

    <span class="pl-c">// Initialization</span>
    $scope.myFunction();
    <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">'</span>Phew. Much $scope everywhere.<span class="pl-pds">'</span></span>);
});</pre></div>

<h3>
<a id="after" class="anchor" href="#after" aria-hidden="true"><span class="octicon octicon-link"></span></a>After</h3>

<p>CoffeeScript:</p>

<div class="highlight highlight-coffeescript"><pre>angular.module(<span class="pl-s1"><span class="pl-pds">'</span>my-module<span class="pl-pds">'</span></span>).controller <span class="pl-s1"><span class="pl-pds">'</span>MyCtrl<span class="pl-pds">'</span></span>, <span class="pl-vpf">($scope, scopeExtend, myService)</span> <span class="pl-st">-&gt;</span> scopeExtend $scope,

    <span class="pl-v"><span class="pl-v">variables:</span></span>
        <span class="pl-v"><span class="pl-v">myVariable:</span></span> <span class="pl-c1">5</span>

    <span class="pl-v"><span class="pl-v">methods:</span></span> 
        <span class="pl-en">myFunction</span><span class="pl-k">:</span> <span class="pl-st"><span class="pl-st">-&gt;</span></span>
            myService.doStuff(<span class="pl-vo">@myVariable</span>)

        <span class="pl-en">myOtherFunction</span><span class="pl-k">:</span> <span class="pl-st"><span class="pl-st">-&gt;</span></span>
            <span class="pl-en">console</span>.<span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>reticulating spleens<span class="pl-pds">'</span></span>)

    <span class="pl-v"><span class="pl-v">watch:</span></span>
        <span class="pl-s1"><span class="pl-pds">'</span>myVariable<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-vpf">(newValue, oldValue)</span> <span class="pl-st">-&gt;</span>
            <span class="pl-vo">@myFunction</span>()

    <span class="pl-v"><span class="pl-v">listen:</span></span>
        <span class="pl-s1"><span class="pl-pds">'</span>SOME_EVENT<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-vpf">(event)</span> <span class="pl-st">-&gt;</span>
            <span class="pl-vo">@myOtherFunction</span>()
            <span class="pl-vo">@myVariable</span><span class="pl-k">++</span>

    <span class="pl-en">initialize</span><span class="pl-k">:</span> <span class="pl-st"><span class="pl-st">-&gt;</span></span>
        <span class="pl-vo">@myFunction</span>()
        <span class="pl-en">console</span>.<span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>Ahh, much better!<span class="pl-pds">'</span></span>)</pre></div>

<p>JavaScript:</p>

<div class="highlight highlight-javascript"><pre>angular.module(<span class="pl-s1"><span class="pl-pds">'</span>my-module<span class="pl-pds">'</span></span>).controller(<span class="pl-s1"><span class="pl-pds">'</span>MyCtrl<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">$scope</span>, <span class="pl-vpf">scopeExtend</span>, <span class="pl-vpf">myService</span>) {
    scopeExtend($scope, {

        variables<span class="pl-k">:</span> {
            myVariable<span class="pl-k">:</span> <span class="pl-c1">5</span>
        },

        methods<span class="pl-k">:</span> {
            <span class="pl-en">myFunction</span>: <span class="pl-st">function</span>() {
                myService.doStuff(<span class="pl-v">this</span>.myVariable);
            },
            <span class="pl-en">myOtherFunction</span>: <span class="pl-st">function</span>() {
                <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">'</span>reticulating spleens<span class="pl-pds">'</span></span>);
            }
        },

        watch<span class="pl-k">:</span> {
            <span class="pl-s1"><span class="pl-pds">'</span><span class="pl-en">myVariable</span><span class="pl-pds">'</span></span>: <span class="pl-st">function</span>(<span class="pl-vpf">newValue</span>, <span class="pl-vpf">oldValue</span>) {
                <span class="pl-v">this</span>.myFunction();
            }
        },

        listen<span class="pl-k">:</span> {
            <span class="pl-s1"><span class="pl-pds">'</span><span class="pl-en">SOME_EVENT</span><span class="pl-pds">'</span></span>: <span class="pl-st">function</span>(<span class="pl-vpf">event</span>) {
                <span class="pl-v">this</span>.myOtherFunction();
                <span class="pl-v">this</span>.myVariable<span class="pl-k">++</span>;
            }
        },

        <span class="pl-en">initialize</span>: <span class="pl-st">function</span>() {
            <span class="pl-v">this</span>.myFunction();
            <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">'</span>Ahh, much better!<span class="pl-pds">'</span></span>);
        }

    });
});</pre></div>

<h2>
<a id="advanced-usage" class="anchor" href="#advanced-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced Usage</h2>

<div class="highlight highlight-coffeescript"><pre>angular.module(<span class="pl-s1"><span class="pl-pds">'</span>example-module<span class="pl-pds">'</span></span>).controller <span class="pl-s1"><span class="pl-pds">'</span>ExampleCtrl<span class="pl-pds">'</span></span>, <span class="pl-vpf">($scope, scopeExtend)</span> <span class="pl-st">-&gt;</span> scopeExtend $scope,
    <span class="pl-v"><span class="pl-v">variables:</span></span>
        <span class="pl-s1"><span class="pl-pds">'</span>test<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-c1">1</span>
        <span class="pl-s1"><span class="pl-pds">'</span>test2<span class="pl-pds">'</span></span><span class="pl-k">:</span> {<span class="pl-v"><span class="pl-v">value:</span></span> <span class="pl-c1">2</span>}
        <span class="pl-s1"><span class="pl-pds">'</span>test3<span class="pl-pds">'</span></span><span class="pl-k">:</span> [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>]

    <span class="pl-v"><span class="pl-v">methods:</span></span>
        <span class="pl-s1"><span class="pl-pds">'</span>readTest<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-st">-&gt;</span> 
            <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>test is<span class="pl-pds">'</span></span>, <span class="pl-vo">@test</span>

        <span class="pl-s1"><span class="pl-pds">'</span>readTest2<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-st">-&gt;</span> 
            <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>test2 is<span class="pl-pds">'</span></span>, <span class="pl-vo">@test2</span>

    <span class="pl-v"><span class="pl-v">listen:</span></span>
        <span class="pl-c"># The name of the event corresponds to the key, in this case 'SOME_EVENT'</span>
        <span class="pl-s1"><span class="pl-pds">'</span>SOME_EVENT<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-vpf">(event, coolArg)</span> <span class="pl-st">-&gt;</span>
            <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>SOME_EVENT received<span class="pl-pds">'</span></span>, coolArg

        <span class="pl-s1"><span class="pl-pds">'</span>SOME_OTHER_EVENT<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-vpf">(event)</span> <span class="pl-st">-&gt;</span> 
            <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>SOME_OTHER_EVENT received<span class="pl-pds">'</span></span>

    <span class="pl-v"><span class="pl-v">watch:</span></span>
        <span class="pl-c"># For simple watches, the watch expression corresponds to the key</span>
        <span class="pl-s1"><span class="pl-pds">'</span>test<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-vpf">(newValue)</span> <span class="pl-st">-&gt;</span> 
            <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>test changed to<span class="pl-pds">'</span></span>, newValue

        <span class="pl-c"># For more complex watches, the key is arbitrary</span>
        <span class="pl-s1"><span class="pl-pds">'</span>testDeep<span class="pl-pds">'</span></span><span class="pl-k">:</span> 
            <span class="pl-v"><span class="pl-v">expression:</span></span> <span class="pl-s1"><span class="pl-pds">'</span>test2<span class="pl-pds">'</span></span> <span class="pl-c"># and the expression is specified here</span>
            <span class="pl-v"><span class="pl-v">depth:</span></span> <span class="pl-s1"><span class="pl-pds">'</span>deep<span class="pl-pds">'</span></span> <span class="pl-c"># as well as the watch depth</span>
            <span class="pl-en">callback</span><span class="pl-k">:</span><span class="pl-vpf"> <span class="pl-vpf">(newValue)</span></span> <span class="pl-st"><span class="pl-st">-&gt;</span></span> <span class="pl-c"># and lastly the callback</span>
                <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>test2 deeply changed to<span class="pl-pds">'</span></span>, newValue

        <span class="pl-c"># You can also watch collections by specifying depth as 'collection'</span>
        <span class="pl-s1"><span class="pl-pds">'</span>testCollection<span class="pl-pds">'</span></span><span class="pl-k">:</span> 
            <span class="pl-v"><span class="pl-v">expression:</span></span> <span class="pl-s1"><span class="pl-pds">'</span>test3<span class="pl-pds">'</span></span>
            <span class="pl-v"><span class="pl-v">depth:</span></span> <span class="pl-s1"><span class="pl-pds">'</span>collection<span class="pl-pds">'</span></span>
            <span class="pl-en">callback</span><span class="pl-k">:</span><span class="pl-vpf"> <span class="pl-vpf">(newValue)</span></span> <span class="pl-st"><span class="pl-st">-&gt;</span></span>
                <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>test3 collection changed to<span class="pl-pds">'</span></span>, newValue

        <span class="pl-c"># You can also watch groups by specifying an array of expressions for expressionGroup</span>
        <span class="pl-s1"><span class="pl-pds">'</span>testGroup<span class="pl-pds">'</span></span><span class="pl-k">:</span>
            <span class="pl-v"><span class="pl-v">expressionGroup:</span></span> [<span class="pl-s1"><span class="pl-pds">'</span>test1<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>test2<span class="pl-pds">'</span></span>]
            <span class="pl-en">callback</span><span class="pl-k">:</span><span class="pl-vpf"> <span class="pl-vpf">(newValues)</span></span> <span class="pl-st"><span class="pl-st">-&gt;</span></span>
                <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>test1 and test2 changed to<span class="pl-pds">'</span></span>, newValues

    <span class="pl-en">initialize</span><span class="pl-k">:</span> <span class="pl-st"><span class="pl-st">-&gt;</span></span>
        <span class="pl-vo">@test1</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>
        <span class="pl-vo">@test2</span>.<span class="pl-v"><span class="pl-v">value <span class="pl-k">=</span></span></span> <span class="pl-c1">5</span>
        <span class="pl-vo">@test3</span>.<span class="pl-s3">push</span>(<span class="pl-c1">4</span>)

        <span class="pl-vo">@$emit</span>(<span class="pl-s1"><span class="pl-pds">'</span>SOME_EVENT<span class="pl-pds">'</span></span>)
        <span class="pl-vo">@_forgetListen</span>(<span class="pl-s1"><span class="pl-pds">'</span>SOME_EVENT<span class="pl-pds">'</span></span>) <span class="pl-c"># The built-in _forgetListen function removes the listener for the specified key</span>
        <span class="pl-vo">@$emit</span>(<span class="pl-s1"><span class="pl-pds">'</span>SOME_EVENT<span class="pl-pds">'</span></span>) <span class="pl-c"># so this shouldn't be received</span>

        <span class="pl-vo">@_forgetWatch</span>(<span class="pl-s1"><span class="pl-pds">'</span>testCollection<span class="pl-pds">'</span></span>) <span class="pl-c"># You can also forget watches by specifying the key</span></pre></div>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/civilframe">civilframe</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>